<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeAnalyzer - –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f1419;
            color: #ffffff;
            line-height: 1.6;
        }

        .header {
            background: #1a1f2e;
            padding: 1rem 2rem;
            border-bottom: 1px solid #2d3748;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #4fd1c7;
            font-size: 1.5rem;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #48bb78;
            animation: pulse 2s infinite;
        }

        .status-dot.error {
            background: #f56565;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: #1a1f2e;
            border: 1px solid #2d3748;
            border-radius: 12px;
            padding: 1.5rem;
            transition: transform 0.2s, border-color 0.2s;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            border-color: #4fd1c7;
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .metric-title {
            font-size: 0.9rem;
            color: #a0aec0;
            font-weight: 500;
        }

        .metric-icon {
            font-size: 1.2rem;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .metric-change {
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .metric-change.positive {
            color: #48bb78;
        }

        .metric-change.negative {
            color: #f56565;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: #1a1f2e;
            border: 1px solid #2d3748;
            border-radius: 12px;
            padding: 1.5rem;
        }

        .chart-title {
            font-size: 1.1rem;
            color: #ffffff;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .logs-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .log-card {
            background: #1a1f2e;
            border: 1px solid #2d3748;
            border-radius: 12px;
            padding: 1.5rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
            border-left: 3px solid transparent;
        }

        .log-entry.info {
            background: rgba(66, 153, 225, 0.1);
            border-left-color: #4299e1;
        }

        .log-entry.error {
            background: rgba(245, 101, 101, 0.1);
            border-left-color: #f56565;
        }

        .log-entry.success {
            background: rgba(72, 187, 120, 0.1);
            border-left-color: #48bb78;
        }

        .log-timestamp {
            color: #a0aec0;
            font-size: 0.7rem;
        }

        .refresh-btn {
            background: #4fd1c7;
            color: #0f1419;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s;
        }

        .refresh-btn:hover {
            background: #38b2ac;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #2d3748;
            border-radius: 50%;
            border-top-color: #4fd1c7;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .alert {
            background: rgba(245, 101, 101, 0.1);
            border: 1px solid #f56565;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            color: #fed7d7;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .logs-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>üéØ TradeAnalyzer Admin</h1>
        <div class="status-indicator">
            <div class="status-dot" id="systemStatus"></div>
            <span id="statusText">–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç</span>
            <button class="refresh-btn" onclick="refreshData()">
                <span id="refreshIcon">üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å
            </button>
        </div>
    </header>

    <div class="container">
        <!-- –ê–ª–µ—Ä—Ç—ã -->
        <div id="alertsContainer"></div>

        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">üë• –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (24—á)</span>
                    <span class="metric-icon">üìä</span>
                </div>
                <div class="metric-value" id="activeUsers">
                    <div class="loading"></div>
                </div>
                <div class="metric-change positive" id="activeUsersChange">
                    <span>‚Üó</span> +12% –∑–∞ –Ω–µ–¥–µ–ª—é
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">üìù –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–∑–¥–∞–Ω–æ</span>
                    <span class="metric-icon">üìà</span>
                </div>
                <div class="metric-value" id="strategiesCount">
                    <div class="loading"></div>
                </div>
                <div class="metric-change positive" id="strategiesChange">
                    <span>‚Üó</span> +8 —Å–µ–≥–æ–¥–Ω—è
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">üîç –ê–Ω–∞–ª–∏–∑—ã –ø—Ä–æ–≤–µ–¥–µ–Ω–æ</span>
                    <span class="metric-icon">üìä</span>
                </div>
                <div class="metric-value" id="analysesCount">
                    <div class="loading"></div>
                </div>
                <div class="metric-change positive" id="analysesChange">
                    <span>‚Üó</span> +15 —Å–µ–≥–æ–¥–Ω—è
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">üêõ –û—à–∏–±–∫–∏ (24—á)</span>
                    <span class="metric-icon">‚ö†Ô∏è</span>
                </div>
                <div class="metric-value" id="errorsCount">
                    <div class="loading"></div>
                </div>
                <div class="metric-change" id="errorsChange">
                    <span>‚Üí</span> –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">üí∞ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø—Ä–µ–º–∏—É–º</span>
                    <span class="metric-icon">üíé</span>
                </div>
                <div class="metric-value" id="conversionRate">
                    <div class="loading"></div>
                </div>
                <div class="metric-change positive" id="conversionChange">
                    <span>‚Üó</span> +2.1% –∑–∞ –º–µ—Å—è—Ü
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">‚ö° –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞</span>
                    <span class="metric-icon">üöÄ</span>
                </div>
                <div class="metric-value" id="responseTime">
                    <div class="loading"></div>
                </div>
                <div class="metric-change positive" id="responseTimeChange">
                    <span>‚Üó</span> –û—Ç–ª–∏—á–Ω–æ
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div class="charts-section">
            <div class="chart-card">
                <h3 class="chart-title">üìà –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (7 –¥–Ω–µ–π)</h3>
                <canvas id="userActivityChart" width="400" height="200"></canvas>
            </div>
            
            <div class="chart-card">
                <h3 class="chart-title">üéØ –í–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏</h3>
                <canvas id="conversionFunnelChart" width="200" height="200"></canvas>
            </div>
        </div>

        <!-- –õ–æ–≥–∏ –∏ –æ—à–∏–±–∫–∏ -->
        <div class="logs-section">
            <div class="log-card">
                <h3 class="chart-title">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                <div id="recentEvents">
                    <div class="loading"></div>
                </div>
            </div>
            
            <div class="log-card">
                <h3 class="chart-title">üö® –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏</h3>
                <div id="recentErrors">
                    <div class="loading"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase (–≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
        const SUPABASE_URL = 'https://wpexepphsdzwopltunnn.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwZXhlcHBoc2R6d29wbHR1bm5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzNTQ5MjIsImV4cCI6MjA3NDkzMDkyMn0.qrLKaW7zGNK6ak-Ll3VHq-Qr-2O9b9GOsMu87Lfm5M0';

        class AdminDashboard {
            constructor() {
                this.charts = {};
                this.refreshInterval = null;
                this.init();
            }

            async init() {
                await this.loadData();
                this.setupCharts();
                this.startAutoRefresh();
            }

            async loadData() {
                try {
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
                    const [
                        activeUsers,
                        strategies,
                        analyses,
                        errors,
                        events,
                        errorLogs
                    ] = await Promise.all([
                        this.getActiveUsers(),
                        this.getStrategiesCount(),
                        this.getAnalysesCount(),
                        this.getErrorsCount(),
                        this.getRecentEvents(),
                        this.getRecentErrors()
                    ]);

                    this.updateMetrics({
                        activeUsers,
                        strategies,
                        analyses,
                        errors
                    });

                    this.updateEvents(events);
                    this.updateErrors(errorLogs);
                    this.updateSystemStatus();

                } catch (error) {
                    console.error('Error loading dashboard data:', error);
                    this.showAlert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', error.message);
                }
            }

            async getActiveUsers() {
                // –ó–∞–ø—Ä–æ—Å –∫ Supabase –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ 24 —á–∞—Å–∞
                const response = await fetch(`${SUPABASE_URL}/rest/v1/user_events?select=user_id&timestamp=gte.${new Date(Date.now() - 24*60*60*1000).toISOString()}`, {
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    }
                });
                
                if (!response.ok) throw new Error('Failed to fetch active users');
                
                const data = await response.json();
                const uniqueUsers = new Set(data.map(event => event.user_id));
                return uniqueUsers.size;
            }

            async getStrategiesCount() {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/strategies?select=count`, {
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                        'Prefer': 'count=exact'
                    }
                });
                
                if (!response.ok) throw new Error('Failed to fetch strategies count');
                
                return parseInt(response.headers.get('content-range').split('/')[1]);
            }

            async getAnalysesCount() {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/analysis_results?select=count`, {
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                        'Prefer': 'count=exact'
                    }
                });
                
                if (!response.ok) throw new Error('Failed to fetch analyses count');
                
                return parseInt(response.headers.get('content-range').split('/')[1]);
            }

            async getErrorsCount() {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/error_logs?select=count&timestamp=gte.${new Date(Date.now() - 24*60*60*1000).toISOString()}`, {
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                        'Prefer': 'count=exact'
                    }
                });
                
                if (!response.ok) return 0;
                
                return parseInt(response.headers.get('content-range').split('/')[1]) || 0;
            }

            async getRecentEvents() {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/user_events?select=*&order=timestamp.desc&limit=10`, {
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    }
                });
                
                if (!response.ok) return [];
                
                return await response.json();
            }

            async getRecentErrors() {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/error_logs?select=*&order=timestamp.desc&limit=10`, {
                    headers: {
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    }
                });
                
                if (!response.ok) return [];
                
                return await response.json();
            }

            updateMetrics(data) {
                document.getElementById('activeUsers').textContent = data.activeUsers || 0;
                document.getElementById('strategiesCount').textContent = data.strategies || 0;
                document.getElementById('analysesCount').textContent = data.analyses || 0;
                document.getElementById('errorsCount').textContent = data.errors || 0;
                
                // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–Ω–≤–µ—Ä—Å–∏—é (–ø—Ä–∏–º–µ—Ä–Ω–æ)
                const conversionRate = data.activeUsers > 0 ? ((data.strategies / data.activeUsers) * 100).toFixed(1) : 0;
                document.getElementById('conversionRate').textContent = `${conversionRate}%`;
                
                // –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
                document.getElementById('responseTime').textContent = '< 100ms';
            }

            updateEvents(events) {
                const container = document.getElementById('recentEvents');
                container.innerHTML = '';
                
                events.forEach(event => {
                    const eventEl = document.createElement('div');
                    eventEl.className = 'log-entry info';
                    eventEl.innerHTML = `
                        <div class="log-timestamp">${new Date(event.timestamp).toLocaleString('ru-RU')}</div>
                        <div>${this.formatEventName(event.event_name)} - User ${event.user_id?.substring(0, 8)}...</div>
                    `;
                    container.appendChild(eventEl);
                });
            }

            updateErrors(errors) {
                const container = document.getElementById('recentErrors');
                container.innerHTML = '';
                
                if (errors.length === 0) {
                    container.innerHTML = '<div class="log-entry success">üéâ –û—à–∏–±–æ–∫ –Ω–µ—Ç!</div>';
                    return;
                }
                
                errors.forEach(error => {
                    const errorEl = document.createElement('div');
                    errorEl.className = 'log-entry error';
                    errorEl.innerHTML = `
                        <div class="log-timestamp">${new Date(error.timestamp).toLocaleString('ru-RU')}</div>
                        <div><strong>${error.type}</strong>: ${error.message}</div>
                    `;
                    container.appendChild(errorEl);
                });
            }

            formatEventName(eventName) {
                const eventNames = {
                    'session_start': 'üöÄ –°–µ—Å—Å–∏—è –Ω–∞—á–∞—Ç–∞',
                    'strategy_created': 'üìù –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∑–¥–∞–Ω–∞',
                    'analysis_completed': 'üîç –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω',
                    'user_registered': 'üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
                    'premium_purchased': 'üíé –ü—Ä–µ–º–∏—É–º –∫—É–ø–ª–µ–Ω'
                };
                
                return eventNames[eventName] || eventName;
            }

            updateSystemStatus() {
                const statusDot = document.getElementById('systemStatus');
                const statusText = document.getElementById('statusText');
                
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
                const errorsCount = parseInt(document.getElementById('errorsCount').textContent);
                
                if (errorsCount > 10) {
                    statusDot.className = 'status-dot error';
                    statusText.textContent = '–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã';
                } else {
                    statusDot.className = 'status-dot';
                    statusText.textContent = '–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç';
                }
            }

            setupCharts() {
                // –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                const ctx1 = document.getElementById('userActivityChart').getContext('2d');
                this.charts.userActivity = new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels: ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'],
                        datasets: [{
                            label: '–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
                            data: [12, 19, 15, 25, 22, 18, 24],
                            borderColor: '#4fd1c7',
                            backgroundColor: 'rgba(79, 209, 199, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#ffffff'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#a0aec0'
                                },
                                grid: {
                                    color: '#2d3748'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#a0aec0'
                                },
                                grid: {
                                    color: '#2d3748'
                                }
                            }
                        }
                    }
                });

                // –ì—Ä–∞—Ñ–∏–∫ –≤–æ—Ä–æ–Ω–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
                const ctx2 = document.getElementById('conversionFunnelChart').getContext('2d');
                this.charts.conversionFunnel = new Chart(ctx2, {
                    type: 'doughnut',
                    data: {
                        labels: ['–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', '–°–æ–∑–¥–∞–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é', '–ü—Ä–æ–≤–µ–ª–∏ –∞–Ω–∞–ª–∏–∑', '–ö—É–ø–∏–ª–∏ –ø—Ä–µ–º–∏—É–º'],
                        datasets: [{
                            data: [100, 65, 45, 12],
                            backgroundColor: [
                                '#4fd1c7',
                                '#38b2ac',
                                '#319795',
                                '#2c7a7b'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#ffffff',
                                    padding: 20
                                }
                            }
                        }
                    }
                });
            }

            showAlert(title, message) {
                const alertsContainer = document.getElementById('alertsContainer');
                const alert = document.createElement('div');
                alert.className = 'alert';
                alert.innerHTML = `
                    <div class="alert-title">${title}</div>
                    <div>${message}</div>
                `;
                alertsContainer.appendChild(alert);
                
                // –£–±–∏—Ä–∞–µ–º –∞–ª–µ—Ä—Ç —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    alert.remove();
                }, 10000);
            }

            startAutoRefresh() {
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                this.refreshInterval = setInterval(() => {
                    this.loadData();
                }, 30000);
            }

            stopAutoRefresh() {
                if (this.refreshInterval) {
                    clearInterval(this.refreshInterval);
                }
            }
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        let dashboard;

        async function refreshData() {
            const refreshIcon = document.getElementById('refreshIcon');
            refreshIcon.innerHTML = '<div class="loading" style="width: 16px; height: 16px;"></div>';
            
            await dashboard.loadData();
            
            refreshIcon.innerHTML = 'üîÑ';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            dashboard = new AdminDashboard();
        });

        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', () => {
            if (dashboard) {
                dashboard.stopAutoRefresh();
            }
        });
    </script>
</body>
</html>
