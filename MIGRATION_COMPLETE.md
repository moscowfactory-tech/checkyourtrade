# ‚úÖ –ú–ò–ì–†–ê–¶–ò–Ø –ù–ê TIMEWEB –ó–ê–í–ï–†–®–ï–ù–ê

## üéâ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –°–µ—Ä–≤–µ—Ä Timeweb
- ‚úÖ PostgreSQL –ë–î –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ gunicorn –Ω–∞ –ø–æ—Ä—Ç—É 5000
- ‚úÖ Systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- ‚úÖ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ reverse proxy –Ω–∞ –ø–æ—Ä—Ç—É 80
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://185.207.64.160/api`

### 2. –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `timeweb-client.js` ‚Äî –∑–∞–º–µ–Ω–∞ –¥–ª—è Supabase
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `index.html` ‚Äî –ø–æ–¥–∫–ª—é—á—ë–Ω Timeweb –∫–ª–∏–µ–Ω—Ç
- ‚úÖ API URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `http://185.207.64.160/api`

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

–û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12):

```
–û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
‚úÖ Timeweb client initialized successfully
üîó API URL: http://185.207.64.160/api
‚úÖ Timeweb connection successful
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ –≤–∞—à —Ö–æ—Å—Ç–∏–Ω–≥ (GitHub Pages, Netlify, Vercel –∏ —Ç.–¥.):

**–§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:**
- `index.html` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- `timeweb-client.js` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (.css, .js, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è Git:**
```bash
cd /Users/arseniyvaravin/Documents/Trade_analysis_tg

git add index.html timeweb-client.js
git commit -m "feat: –ú–∏–≥—Ä–∞—Ü–∏—è —Å Supabase –Ω–∞ Timeweb API"
git push origin main
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç –≤ Telegram
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Web App
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
   - –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏–∑–æ–≤

---

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API:

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| GET | `/api/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API |
| GET | `/api/info` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API |
| GET | `/api/strategies?telegram_user_id=XXX` | –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ |
| POST | `/api/strategies` | –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é |
| PUT | `/api/strategies/<id>` | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é |
| DELETE | `/api/strategies/<id>` | –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é |
| GET | `/api/analysis_results?telegram_user_id=XXX` | –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑—ã |
| POST | `/api/analysis_results` | –°–æ–∑–¥–∞—Ç—å –∞–Ω–∞–ª–∏–∑ |
| DELETE | `/api/analysis_results/<id>` | –£–¥–∞–ª–∏—Ç—å –∞–Ω–∞–ª–∏–∑ |
| GET | `/api/users/stats/<telegram_id>` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## üêõ –û—Ç–ª–∞–¥–∫–∞:

### –ï—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Timeweb:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
systemctl status tradeanalyzer.service

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo journalctl -u tradeanalyzer.service -n 100 --no-pager

# –õ–æ–≥–∏ Nginx
sudo tail -n 100 /var/log/nginx/error.log
```

### –ï—Å–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ—à–∏–±–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Network
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/*`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ –∏ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (TODO):

### 1. HTTPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS —á–µ—Ä–µ–∑ Let's Encrypt:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Timeweb
sudo apt install -y certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –î–æ–º–µ–Ω, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ IP `185.207.64.160`

### 2. CORS

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API, –æ–±–Ω–æ–≤–∏—Ç–µ `timeweb_api_simple.py`:

```python
CORS(app, origins=['https://your-domain.com'])
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API:
```bash
curl -s http://185.207.64.160/api/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "status": "healthy",
  "timestamp": "2025-10-16T...",
  "database": "connected"
}
```

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç:

- [x] –ë–î PostgreSQL –Ω–∞ Timeweb –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [x] –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤ Telegram
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–µ–Ω HTTPS

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API –æ—Ç–≤–µ—á–∞–µ—Ç: `http://185.207.64.160/api/health`

**–ì–æ—Ç–æ–≤–æ! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ —Å Timeweb API.** üöÄ
