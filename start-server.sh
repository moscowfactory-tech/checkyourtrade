#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ TradeAnalyzer
echo "üöÄ Starting TradeAnalyzer local server..."

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "$(dirname "$0")"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–≤–æ–±–æ–¥–µ–Ω –ª–∏ –ø–æ—Ä—Ç 8000
if lsof -Pi :8000 -sTCP:LISTEN -t >/dev/null ; then
    echo "‚ö†Ô∏è  Port 8000 is already in use. Trying to kill existing process..."
    kill -9 $(lsof -ti:8000) 2>/dev/null || true
    sleep 2
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Python
if command -v python3 &> /dev/null; then
    echo "‚úÖ Using Python 3"
    python3 -m http.server 8000
elif command -v python &> /dev/null; then
    echo "‚úÖ Using Python"
    python -m http.server 8000
else
    echo "‚ùå Python not found. Please install Python."
    exit 1
fi
